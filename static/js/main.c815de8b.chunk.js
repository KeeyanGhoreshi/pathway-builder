(this["webpackJsonppathway-builder"]=this["webpackJsonppathway-builder"]||[]).push([[0],{103:function(e,t,a){e.exports={missingDataPopup:"MissingDataPopup_missingDataPopup__A-EBJ",popupContent:"MissingDataPopup_popupContent__24BvC",popupTrigger:"MissingDataPopup_popupTrigger__11eAy",popupChoice:"MissingDataPopup_popupChoice__5oEld",selected:"MissingDataPopup_selected__20Or7",footer:"MissingDataPopup_footer__1wJXm",externalLink:"MissingDataPopup_externalLink__3oYt-"}},160:function(e,t,a){e.exports={infoTable:"ExpandedNode_infoTable__3v2tx",descTitle:"ExpandedNode_descTitle__15ki8",desc:"ExpandedNode_desc__3Xdkf",externalLink:"ExpandedNode_externalLink__1Mr1x",defaultTextButton:"ExpandedNode_defaultTextButton__2Bvq6",commentsForm:"ExpandedNode_commentsForm__3Q20Y",footer:"ExpandedNode_footer__FOCYI",comments:"ExpandedNode_comments__9q-JW"}},161:function(e,t,a){e.exports={root:"PathwaysList_root__YrYB0",createPathwayButton:"PathwaysList_createPathwayButton__1EBhl",pathwayList:"PathwaysList_pathwayList__3R6BW",editButton:"PathwaysList_editButton__3YjPF"}},205:function(e,t,a){"use strict";(function(e){var n=a(65),r=a(412),o=a(413),i=new(function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.config=e.CONFIG?Object(n.a)({},e.CONFIG,{},a):Object(n.a)({},a)}return Object(o.a)(t,[{key:"get",value:function(e,t){var a=e.split("."),n=this.config,r=null;for(var o in a){n=r=n[a[o]]}return r||t}},{key:"add",value:function(e){e&&(this.config=Object(n.a)({},this.config,{},e))}}]),t}());t.a=i}).call(this,a(67))},208:function(e,t,a){e.exports={navigation:"Navigation_navigation__1EgxP",navigation__back:"Navigation_navigation__back__2cVZ2",navigation__leftPanel:"Navigation_navigation__leftPanel__QjHPF",navigation__rightPanel:"Navigation_navigation__rightPanel__1FRD3"}},209:function(e,t,a){e.exports={arrow:"Arrow_arrow__3TM91",arrowhead:"Arrow_arrowhead__3XjQ0",arrowOnPatientPath:"Arrow_arrowOnPatientPath__1r5CB"}},278:function(e,t,a){e.exports={root:"Loading_root__3b6qy"}},279:function(e,t,a){e.exports={display:"App_display__2vneK",graph:"App_graph__3EP_l"}},30:function(e,t,a){e.exports={sidebarContainer:"Sidebar_sidebarContainer__3IS0-",sidebarToggle:"Sidebar_sidebarToggle__2OC3L",sidebar:"Sidebar_sidebar__3qUkX",header:"Sidebar_header__2SFYN",nodeName:"Sidebar_nodeName__3ow6C",icon:"Sidebar_icon__vghqV",back:"Sidebar_back__a1oXX",nodeSettings:"Sidebar_nodeSettings__mx65c",addNodesContainer:"Sidebar_addNodesContainer__25qXW",button:"Sidebar_button__tmvcR",description:"Sidebar_description__3buTg"}},409:function(e,t,a){},410:function(e,t,a){e.exports=a.p+"static/media/camino-logo-dark.c8fc712a.png"},411:function(e,t,a){e.exports={dropdown:"DropDown_dropdown__1KvCw"}},414:function(e,t,a){e.exports={pathwayPopup:"PathwayPopup_pathwayPopup__2moYb"}},423:function(e,t,a){e.exports={root:"Graph_root__1SJOc"}},441:function(e,t,a){e.exports=a(838)},66:function(e,t,a){e.exports={node:"Node_node__38uoJ",icon:"Node_icon__354W4",onPatientPath:"Node_onPatientPath__3LPjE",actionable:"Node_actionable__bHXKd",notOnPatientPath:"Node_notOnPatientPath__24OpF",expandedNode:"Node_expandedNode__1ar-A",childOnPatientPath:"Node_childOnPatientPath__28UD6",childActionable:"Node_childActionable__SwUjD",childNotOnPatientPath:"Node_childNotOnPatientPath__2j4QB"}},836:function(e,t,a){},838:function(e,t,a){"use strict";a.r(t);a(442),a(451);var n=a(0),r=a.n(n),o=a(19),i=a.n(o),c=a(425),l=a(102),u=a(428),s=a(25),d=a(15),m=a(11),p=a(427),h=a(886),f=a(872),v=a(65),b=a(426),E={white:"#fff",black:"#222",blue:"#5d89a1",red:"#d95d77",gray:"#4a4a4a",grayMedium:"#bbbdc0",grayBlue:"#cbd5df",grayLighter:"#eaeef2",grayDark:"#444",green:"#2fa874"},g={fontFamily:"'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif"},y={MuiButton:{root:{borderRadius:0},label:{fontWeight:600},iconSizeMedium:{"& > *:first-child":{fontSize:14}},iconSizeSmall:{"& > *:first-child":{fontSize:14}}},MuiTableHead:{root:{backgroundColor:E.grayLighter}},MuiTableCell:{root:{fontSize:"1em"},head:{padding:"5px 16px",borderBottom:"none"}},MuiFormControl:{root:{margin:"10px 0","&:hover":{borderColor:E.white}}},MuiFormLabel:{root:{color:E.white,fontStyle:"italic","&$focused":{color:E.white}}},MuiInputBase:{root:{color:E.white,fontWeight:600,"&:hover":{borderColor:E.white,backgroundColor:E.grayDark}}},MuiOutlinedInput:{root:{borderRadius:"0","&:hover":{borderColor:E.white},"&:hover $notchedOutline":{borderColor:E.white},"&$focused $notchedOutline":{borderColor:E.white}},notchedOutline:{borderColor:E.white}},MuiSelect:{icon:{color:E.white,fontSize:"2em"}},MuiPaper:{rounded:{borderRadius:"0"}}},_=Object(b.a)({typography:Object(v.a)({},g),palette:{primary:{main:E.blue},secondary:{main:E.red},common:E,background:{default:E.grayLighter},text:{primary:E.gray,secondary:E.gray}},overrides:Object(v.a)({},y)}),w=Object(b.a)({typography:Object(v.a)({},g),palette:{primary:{main:E.blue},secondary:{main:E.red},common:E,background:{default:E.grayBlue},text:{primary:E.black,secondary:E.black}},overrides:Object(v.a)({},y)}),O=Object(n.createContext)((function(){})),N=function(e){var t=e.children,a=Object(n.useState)(_),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(n.useCallback)((function(){c((function(e){return e===_?w:_}))}),[]);return r.a.createElement(f.a,{theme:i},r.a.createElement(O.Provider,{value:l},t))},P=a(409),k=a.n(P),j=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),o=a[0],i=a[1],c=Object(n.useContext)(O),l=function(){i(null)};return r.a.createElement("header",{className:k.a.header},r.a.createElement("img",{src:e.logo,alt:"logo"}),r.a.createElement("button",{onClick:function(e){i(e.currentTarget)},"aria-controls":"options-menu","aria-haspopup":"true"},r.a.createElement(d.a,{icon:m.f})),r.a.createElement(p.a,{id:"options-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:l},r.a.createElement(h.a,{onClick:function(){c(),l()}},"Toggle Theme")))},x=a(875),C=a(5),S=a(208),B=a.n(S),A=Object(x.a)((function(e){return{navigation:{backgroundColor:e.palette.background.default,color:e.palette.text.primary}}}),{name:"Navigation"}),M=function(e){var t=e.name,a=void 0===t?"":t,n=e.onBack,o=A();return r.a.createElement("nav",{className:Object(C.a)(B.a.navigation,o.navigation)},r.a.createElement("div",{className:B.a.navigation__leftPanel},n&&r.a.createElement(d.a,{icon:m.d,className:B.a.navigation__back,onClick:n}),r.a.createElement("p",null,a)))},R=a(410),T=a.n(R),z=a(877),D=a(411),L=a.n(D),F=a(876),I=a(887),W=a(885),H=function(e){var t=e.id,a=e.label,o=e.options,i=e.initialSelected,c=Object(n.useState)(null!==i&&void 0!==i?i:o[0]),l=Object(s.a)(c,2),u=l[0],d=l[1];return r.a.createElement(F.a,{variant:"outlined",className:L.a.dropdown},r.a.createElement(I.a,{id:t,htmlFor:"".concat(t,"-select")},a),r.a.createElement(W.a,{id:"".concat(t,"-select"),value:u.value,onChange:function(e){var t=o.find((function(t){return t.value===e.target.value}));t&&d(t)},label:a},o.map((function(e){return r.a.createElement(h.a,{value:e.value,key:e.value},e.label)}))))},G=a(30),q=a.n(G),U=function(){return r.a.createElement("div",{className:q.a.addNodesContainer},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.button},r.a.createElement(z.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(d.a,{icon:m.l})},"Add Action Node")),r.a.createElement("td",{className:q.a.description},"Any clinical or worfklow step which is not a decision.")),r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.button},r.a.createElement(z.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(d.a,{icon:m.l})},"Add Branch Node")),r.a.createElement("td",{className:q.a.description},"A logical branching point based on clinical or workflow criteria.")),r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.button},r.a.createElement(z.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(d.a,{icon:m.l})},"Add Reusable Node")),r.a.createElement("td",{className:q.a.description},"A previously built node or group of nodes defining a set of criteria.")))))},X=function(e){var t=e.currentNode;return r.a.createElement("div",{className:q.a.header},r.a.createElement("div",{className:q.a.icon,id:q.a.back},r.a.createElement(d.a,{icon:m.d})),r.a.createElement("div",{className:q.a.nodeName},t),r.a.createElement("div",{className:q.a.icon},r.a.createElement(d.a,{icon:m.g})),r.a.createElement("div",{className:q.a.icon,id:q.a.nodeSettings},r.a.createElement(d.a,{icon:m.h})))},Y=function(e){var t=e.headerElement,a=Object(n.useRef)(null),o=Object(n.useState)(!0),i=Object(s.a)(o,2),c=i[0],l=i[1],u=Object(n.useState)("Start"),p=Object(s.a)(u,1)[0],h=function(){l(!c)};return Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a.current)&&(null===t||void 0===t?void 0:t.current)&&(a.current.style.height=window.innerHeight-t.current.clientHeight+"px")}),[c,t]),c?r.a.createElement("div",{className:q.a.sidebarContainer,ref:a},r.a.createElement("div",{className:q.a.sidebar},r.a.createElement(X,{currentNode:p}),r.a.createElement("hr",null),r.a.createElement(H,{label:"Node Type",id:"Node Type",options:[{label:"Action",value:"action"},{label:"Branch",value:"branch"}]}),r.a.createElement(U,null)),r.a.createElement("div",{className:q.a.sidebarToggle,onClick:h},r.a.createElement(d.a,{icon:m.d}))):r.a.createElement("div",{className:q.a.sidebarContainer},r.a.createElement("div",{className:q.a.sidebarToggle,onClick:h},r.a.createElement(d.a,{icon:m.e})))},J=a(134),Q=a(198),V=a(273),$=a.n(V),K=a(205),Z=K.a.get("graphLayoutProvider","dagre");function ee(e,t){return"dagre"===Z?function(e,t){var a=Object.keys(e.states),n=new $.a.graphlib.Graph;n.setGraph({}),n.setDefaultEdgeLabel((function(){return{}})),a.forEach((function(a){var r=e.states[a],o=t[a];o?n.setNode(a,{label:r.label,width:o.width,height:o.height}):n.setNode(a,{label:r.label,width:10*r.label.length,height:50}),r.transitions.forEach((function(e){var t=e.condition?{label:e.condition.description,width:25,height:20}:{};n.setEdge(a,e.transition,t)}))})),$.a.layout(n);for(var r={},o=n.node("Start").x,i=0,c=a;i<c.length;i++){var l=c[i],u=n.node(l);r[l]={x:u.x-o-u.width/2,y:u.y-u.height/2}}var s={};return n.edges().forEach((function(e){var t=n.edge(e),a="".concat(e.v,", ").concat(e.w),r=t.label?{text:t.label,x:t.x-o,y:t.y}:null;s[a]={label:r,start:e.v,end:e.w,points:t.points.map((function(e){return{x:e.x-o,y:e.y}}))}})),{nodeCoordinates:r,edges:s}}(e,t):function(e){var t=function(e){var t,a={};for(t in e.states)a[t]={label:t,rank:NaN,horizontalPosition:NaN,children:[],parents:[],canMove:!0};return Object.keys(e.states).forEach((function(t){e.states[t].transitions.forEach((function(e){a[t].children.includes(e.transition)||a[t].children.push(e.transition),a[e.transition].parents.includes(t)||a[e.transition].parents.push(t)}))})),a.Start.rank=0,a}(e),a=[["Start"]],n=0;do{var r,o=Object(J.a)(a[n]);try{for(o.s();!(r=o.n()).done;){var i=r.value;d(t[i],n+1)}}catch(p){o.e(p)}finally{o.f()}n++}while(a.length!==n);for(c(t.Start,-50),n=1;n<a.length;n++)l(n);return{nodeCoordinates:function(){var e={};for(var a in t){var n=t[a];e[a]={x:n.horizontalPosition,y:100*n.rank}}return e}(),edges:{}};function c(e,t){if(isNaN(e.horizontalPosition)||e.canMove){e.horizontalPosition=t;for(var a=1;u(e);){var n=a%2===0?-1:1;e.horizontalPosition=t+n*Math.ceil(a/2)*110,a+=1}}}function l(e){var n,r=Object(J.a)(a[e]);try{var o=function(){var e=n.value,a=t[e];if(!isNaN(a.horizontalPosition))return"continue";var r=a.parents.filter((function(e){return t[e].rank<a.rank}));if(1===r.length){var o=a.parents[0],i=t[o];if(i.children.length%2===1)c(t[i.children[Math.floor(i.children.length/2)]],i.horizontalPosition);!function(e){var a=e.children.filter((function(e){return isNaN(t[e].horizontalPosition)||t[e].canMove}));if(0!==a.length)if(1!==a.length){a.length%2===1&&a.splice(Math.ceil(a.length/2),1);for(var n=0;n<a.length/2;n++){var r=t[a[a.length/2-n-1]];c(r,e.horizontalPosition-110*(n+1)),r.canMove=!1,c(r=t[a[a.length/2+n]],e.horizontalPosition+110*(n+1)),r.canMove=!1}}else c(t[a[0]],e.horizontalPosition)}(i)}else{var l=r.map((function(e){return t[e].horizontalPosition})).reduce((function(e,t){return e+t}),0);c(a,l/r.length)}};for(r.s();!(n=r.n()).done;)o()}catch(p){r.e(p)}finally{r.f()}}function u(e){var n,r=a[e.rank].map((function(e){return t[e]})),o=Object(J.a)(r);try{for(o.s();!(n=o.n()).done;){if(s(e,n.value))return!0}}catch(p){o.e(p)}finally{o.f()}return!1}function s(e,t){return!function(e,t){return e.label===t.label}(e,t)&&(!isNaN(e.rank)&&!isNaN(e.horizontalPosition)&&!isNaN(t.rank)&&!isNaN(t.horizontalPosition)&&e.rank===t.rank&&e.horizontalPosition===t.horizontalPosition)}function d(e,n){e.children.forEach((function(r){var o=t[r];o.rank<e.rank?(a[o.rank].splice(a[o.rank].indexOf(r),1),m(r,n),d(o,n+1)):isNaN(o.rank)&&m(r,n)}))}function m(e,n){try{a[n].push(e)}catch(p){a[n]=[e]}finally{t[e].rank=n}}}(e)}var te=a(66),ae=a.n(te),ne=a(103),re=a.n(ne),oe=a(884),ie=a(414),ce=a.n(ie),le=function(e){var t=e.Content,a=e.Trigger,n=e.popupPosition,o=e.open,i=e.setOpen,c=e.className;return r.a.createElement(oe.a,{content:t,position:n||"bottom right",className:"".concat(ce.a.pathwayPopup," ").concat(c),on:"click",open:o,onOpen:function(){i&&i(!0)},onClose:function(){i&&i(!1)},pinned:!0,trigger:a})},ue=a(85),se=a.n(ue),de=function(e){var t=e.type,a=e.onClick;return r.a.createElement("button",{className:"".concat(se.a.largeActionButton," button ").concat("decline"===t&&se.a.largeDecline),type:"button",onClick:a},t[0].toUpperCase()+t.slice(1))},me=function(e){var t=e.type,a=e.onClick;return r.a.createElement("div",{className:"".concat("accept"===t?se.a.accept:se.a.decline," ").concat(se.a.smallActionButton),onClick:a,"data-testid":t},r.a.createElement(d.a,{icon:"accept"===t?m.b:m.p}))},pe=function(e){var t=e.type,a=e.onClick;return r.a.createElement("div",{className:"".concat("accept"===t?se.a.accept:se.a.decline," ").concat(se.a.mediumActionButton),onClick:a,"data-testid":t},r.a.createElement(d.a,{icon:"accept"===t?m.b:m.p}),{accept:"Submit",decline:"Cancel"}[t])},he=function(e){var t=e.type,a=e.size,n=e.onClick;switch(a){case"small":return r.a.createElement(me,{type:t,onClick:n});case"large":return r.a.createElement(de,{type:t,onClick:n});case"medium":return r.a.createElement(pe,{type:t,onClick:n})}},fe=function(e){var t=e.values,a=e.setOpen,o=Object(n.useState)(!1),i=Object(s.a)(o,2),c=i[0],l=i[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),m=d[0],p=d[1];return r.a.createElement("div",null,r.a.createElement("div",{className:re.a.popupContent},"Select Value:",r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e,className:re.a.popupChoice+" "+(m===e?re.a.selected:""),onClick:function(){c&&m===e?(l(!1),p("")):(l(!0),p(e))}},e)})))),r.a.createElement("div",{className:re.a.footer},r.a.createElement(he,{size:"small",type:"decline",onClick:function(){return a(!1)}}),c&&r.a.createElement(he,{size:"small",type:"accept",onClick:function(){a(!1)}})))},ve=function(e){var t=e.values,a=Object(n.useState)(!1),o=Object(s.a)(a,2),i=o[0],c=o[1];return r.a.createElement(le,{Content:r.a.createElement(fe,{values:t,setOpen:c}),className:re.a.missingDataPopup,Trigger:r.a.createElement("div",{className:re.a.popupTrigger},"missing data",r.a.createElement(d.a,{icon:m.g,className:re.a.externalLink})),open:i,setOpen:c})},be=a(160),Ee=a.n(be);function ge(e){var t=e.action;return!!t&&t.length>0}var ye=Object(n.memo)((function(e){var t=e.pathwayState,a=(e.isActionable,e.isGuidance);e.documentation;return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{isGuidance:a,pathwayState:t}))})),_e=function(e){var t=e.title,a=e.description;return r.a.createElement("tr",null,r.a.createElement("td",{className:Ee.a.descTitle},t),r.a.createElement("td",{className:Ee.a.desc},a))};var we=Object(n.memo)((function(e){var t,a=e.pathwayState,n=e.isGuidance&&function(e){var t,a,n=e.action[0].resource,o=void 0!==n.medicationCodeableConcept?null===n||void 0===n||null===(t=n.medicationCodeableConcept)||void 0===t?void 0:t.coding:null===n||void 0===n||null===(a=n.code)||void 0===a?void 0:a.coding;return[r.a.createElement(_e,{key:"Notes",title:"Notes",description:e.action[0].description}),r.a.createElement(_e,{key:"Type",title:"Type",description:n.resourceType}),r.a.createElement(_e,{key:"System",title:"System",description:r.a.createElement(r.a.Fragment,null,o&&o[0].system,r.a.createElement("a",{href:o&&o[0].system,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(d.a,{icon:m.i,className:Ee.a.externalLink})))}),r.a.createElement(_e,{key:"Code",title:"Code",description:o&&o[0].code}),r.a.createElement(_e,{key:"Display",title:"Display",description:o&&o[0].display})]}(a),o=!ge(t=a)&&t.transitions.length>1&&function(e){var t=[],a=e.transitions.map((function(e){var t,a=null===(t=e.condition)||void 0===t?void 0:t.description;return a||""})).filter((function(e,t,a){return a.indexOf(e)===t}));return t.push(r.a.createElement(_e,{key:"value",title:"Value",description:r.a.createElement(ve,{values:a})})),t}(a);return r.a.createElement("div",{className:"expandedNode"},r.a.createElement("table",{className:Ee.a.infoTable},r.a.createElement("tbody",null,n||o)))})),Oe=ye,Ne=Object(x.a)((function(e){return{"not-on-patient-path":{backgroundColor:e.palette.background.default,color:e.palette.text.primary},"child-not-on-patient-path":{borderColor:e.palette.background.default}}}),{name:"Node"}),Pe=Object(n.memo)(Object(n.forwardRef)((function(e,t){var a=e.pathwayState,n=e.documentation,o=e.isOnPatientPath,i=e.isCurrentNode,c=e.xCoordinate,l=e.yCoordinate,u=e.expanded,s=void 0!==u&&u,d=e.onClickHandler,m=a.label,p={top:l,left:c},h=Ne(),f=o?ae.a.onPatientPath:Object(C.a)(ae.a.notOnPatientPath,h["not-on-patient-path"]),v=i&&!n,b=[ae.a.node,f],E="";s&&b.push("expanded"),v?(b.push(ae.a.actionable),E=ae.a.childActionable):E=o?ae.a.childOnPatientPath:Object(C.a)(ae.a.childNotOnPatientPath,h["child-not-on-patient-path"]);var g=ge(a),y=o&&g&&!v?"DocumentReference"!==(null===n||void 0===n?void 0:n.resourceType):null,_=null;return"action"in a?_=y:!i&&n&&(_=!0),r.a.createElement("div",{className:b.join(" "),style:p,ref:t},r.a.createElement("div",{className:"nodeTitle ".concat(d&&"clickable"),onClick:d},r.a.createElement("div",{className:"iconAndLabel"},r.a.createElement(ke,{pathwayState:a,isGuidance:g}),m),r.a.createElement(je,{status:_})),s&&r.a.createElement("div",{className:"".concat(ae.a.expandedNode," ").concat(E)},r.a.createElement(Oe,{pathwayState:a,isActionable:v,isGuidance:g,documentation:n})))}))),ke=function(e){var t=e.pathwayState,a=e.isGuidance,n=m.j;if("Start"===t.label&&(n=m.k),a){var o=t;if(o.action.length>0){var i=o.action[0].resource.resourceType;"MedicationRequest"===i?n=m.m:"MedicationAdministration"===i?n=m.a:"Procedure"===i&&(n=m.o)}}return r.a.createElement(d.a,{icon:n,className:ae.a.icon})},je=function(e){var t=e.status;if(null==t)return null;var a=t?m.c:m.q;return r.a.createElement("div",{className:"statusIcon"},r.a.createElement(d.a,{icon:a,className:ae.a.icon}))},xe=Pe,Ce=a(209),Se=a.n(Ce),Be=function(e){var t=e.points,a=e.arrowheadId,n=e.widthOffset,o=t.map((function(e){return{x:e.x+n,y:e.y}})),i=o.length;o[i-1].y-=17.5;var c,l="M ".concat(o[0].x," ").concat(o[0].y," ");return c=i%3,l=o.reduce((function(e,t,a,n){return a%3!==c?e:"".concat(e," C ").concat(t.x," ").concat(t.y," ").concat(n[a+1].x," ").concat(n[a+1].y," ").concat(n[a+2].x,"\n        ").concat(n[a+2].y)}),l),r.a.createElement("path",{d:l,fill:"transparent",markerEnd:"url(#".concat(a,")")})},Ae=function(e){var t=e.edge,a=e.edgeName,n=e.isOnPatientPath,o=e.widthOffset,i=n?Se.a.arrowOnPatientPath:Se.a.arrow,c=a.replace(" ",""),l="arrowhead-".concat(c),u=t.label;return r.a.createElement("svg",{className:i},r.a.createElement(Be,{points:t.points,arrowheadId:l,widthOffset:o}),u?r.a.createElement("text",{x:u.x+o,y:u.y},u.text):null,r.a.createElement("defs",null,r.a.createElement("marker",{id:l,className:Se.a.arrowhead,markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},r.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7"}))))},Me=a(423),Re=a.n(Me),Te=a(424),ze=a.n(Te),De=function(e){return Object.values(e.documentation).filter((function(e){return e.onPath})).map((function(e){return e.state}))},Le=function(e,t){var a=De(e),n=a.indexOf(t.start),r=a.indexOf(t.end);return-1!==n&&-1!==r&&n+1===r||!(n!==a.length-1||!e.currentStates.includes(t.end))},Fe=Object(n.memo)((function(e){var t,a,o,i=e.evaluatedPathway,c=e.interactive,l=void 0===c||c,u=e.expandCurrentNode,d=void 0===u||u,m=(e.updateEvaluatedPathways,i.pathway),p=Object(n.useRef)(null),h=Object(n.useRef)({}),f=Object(n.useState)(null!==(t=null===p||void 0===p||null===(a=p.current)||void 0===a||null===(o=a.parentElement)||void 0===o?void 0:o.clientWidth)&&void 0!==t?t:0),b=Object(s.a)(f,2),E=b[0],g=b[1],y=Object(n.useCallback)((function(){var e={};return(null===h||void 0===h?void 0:h.current)&&Object.keys(h.current).forEach((function(t){var a=h.current[t],n=a.clientWidth,r=Array.from(a.children).reduce((function(e,t){return e+t.clientHeight}),0);e[t]={width:n,height:r}})),ee(m,e)}),[m]),_=Object(n.useState)(y()),w=Object(s.a)(_,2),O=w[0],N=w[1],P=O.nodeCoordinates,k=O.edges,j=Object(n.useMemo)((function(){return void 0!==P?Object.values(P).map((function(e){return e.y})).reduce((function(e,t){return Math.max(e,t)})):0}),[P]),x=void 0!==P?Object.values(P).map((function(e){return e.x+E/2})).reduce((function(e,t){return Math.min(e,t)})):0;if(x<0){var C=-1*x;Object.keys(P).forEach((function(e){P[e].x+=C})),Object.keys(k).forEach((function(e){var t=k[e];t.points.forEach((function(e){return e.x+=C})),t.label&&(t.label.x+=C)}))}var S=Object.keys(O).toString(),B=Object(n.useMemo)((function(){return S.split(",").reduce((function(e,t){return e[t]=!1,e}),{})}),[S]),A=Object(n.useState)(B),M=Object(s.a)(A,2),R=M[0],T=M[1],z=Object(n.useCallback)((function(e,t){T((function(t){return Object(v.a)({},t,Object(Q.a)({},e,!t[e]))}))}),[]);Object(n.useEffect)((function(){if(i.pathwayResults){var e,t=Object(J.a)(i.pathwayResults.currentStates);try{for(t.s();!(e=t.n()).done;){var a=e.value;d&&a&&z(a,!0)}}catch(n){t.e(n)}finally{t.f()}}}),[d,i.pathwayResults,z]),Object(n.useEffect)((function(){var e;(null===(e=p.current)||void 0===e?void 0:e.parentElement)&&new ze.a(p.current.parentElement,(function(){var e,t,a;g(null!==(e=null===(t=p.current)||void 0===t||null===(a=t.parentElement)||void 0===a?void 0:a.clientWidth)&&void 0!==e?e:0),N(y())}))}),[y]),Object(n.useEffect)((function(){N(y())}),[R,y]);var D=void 0!==k?Object.values(k).map((function(e){return e.label})).map((function(e){return e?e.x+10*e.text.length+E/2:0})).reduce((function(e,t){return Math.max(e,t)}),0):E,L=i.pathwayResults?i.pathwayResults.documentation:{};return r.a.createElement(Ie,{graphElement:p,interactive:l,maxHeight:j,nodeCoordinates:P,documentation:L,edges:k,evaluatedPathway:i,nodeRefs:h,parentWidth:E,maxWidth:D,pathway:m,expanded:R,setExpanded:z})})),Ie=Object(n.memo)((function(e){var t=e.graphElement,a=e.interactive,o=e.maxHeight,i=e.nodeCoordinates,c=e.documentation,l=e.edges,u=e.evaluatedPathway,s=e.nodeRefs,d=e.parentWidth,m=e.maxWidth,p=e.pathway,h=e.expanded,f=e.setExpanded;return r.a.createElement("div",{ref:t,id:"graph-root",className:Re.a.root,style:{height:a?o+150:"inherit",width:m+"px",position:"relative",marginRight:"5px"}},void 0!==i?Object.keys(i).map((function(e){var t=c[e],o=Object(n.useCallback)((function(){return a?f(e):void 0}),[e]);return r.a.createElement(xe,{key:e,documentation:t,ref:function(t){s.current[e]=t},pathwayState:p.states[e],isOnPatientPath:!!u.pathwayResults&&(De(u.pathwayResults).includes(e)||u.pathwayResults.currentStates.includes(e)),isCurrentNode:!!u.pathwayResults&&u.pathwayResults.currentStates.includes(e),xCoordinate:i[e].x+d/2,yCoordinate:i[e].y,expanded:h[e],onClickHandler:o})})):[],r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:m+5,height:o,zIndex:1,top:0,left:0,overflow:"visible"}},void 0!==l?Object.keys(l).map((function(e){var t=l[e];return r.a.createElement(Ae,{key:e,edge:t,edgeName:e,isOnPatientPath:!!u.pathwayResults&&Le(u.pathwayResults,t),widthOffset:d/2})})):[]))})),We=Fe,He=a(878),Ge=a(879),qe=a(880),Ue=a(881),Xe=a(882),Ye=a(883),Je=a(278),Qe=a.n(Je);function Ve(){return r.a.createElement("div",{className:Qe.a.root},r.a.createElement(d.a,{icon:m.n,className:Qe.a.root,size:"4x",spin:!0}))}var $e=a(161),Ke=a.n($e),Ze=function(e){var t=e.pathways,a=e.deleteButton,n=e.editButton;return r.a.createElement(He.a,{className:Ke.a.pathwayList},r.a.createElement(Ge.a,{"aria-label":"pathway list"},r.a.createElement(qe.a,null,r.a.createElement(Ue.a,null,r.a.createElement(Xe.a,null,"Pathway Name"),r.a.createElement(Xe.a,null,"Status"),r.a.createElement(Xe.a,null,"Last Updated"),r.a.createElement(Xe.a,null))),r.a.createElement(Ye.a,null,t.map((function(e){return r.a.createElement(Ue.a,{key:e.pathway.name},r.a.createElement(Xe.a,{component:"th",scope:"row"},e.pathway.name),r.a.createElement(Xe.a,null,"draft"),r.a.createElement(Xe.a,null,"2 days ago"),r.a.createElement(Xe.a,{align:"right"},r.a.createElement(z.a,{className:Ke.a.editButton,color:"primary",size:"small",startIcon:r.a.createElement(d.a,{icon:m.g}),onClick:function(){return n(e)}},"Edit"),r.a.createElement(z.a,{color:"secondary",size:"small",startIcon:r.a.createElement(d.a,{icon:m.r}),onClick:function(){return a(e)}},"Delete")))})))))},et=function(e){var t=e.evaluatedPathways,a=e.callback;return"loading"===e.service.status?r.a.createElement(Ve,null):r.a.createElement("div",{className:Ke.a.root},r.a.createElement(z.a,{className:Ke.a.createPathwayButton,variant:"contained",color:"primary",startIcon:r.a.createElement(d.a,{icon:m.l}),onClick:function(){return a()}},"Create Pathway"),r.a.createElement(Ze,{pathways:t,deleteButton:function(){return a()},editButton:function(){return a()}}))},tt=Object(n.createContext)({evaluatedPathway:null,setEvaluatedPathway:function(){},updateEvaluatedPathways:function(){}}),at=function(e){var t=e.children,a=e.pathwayCtx;return r.a.createElement(tt.Provider,{value:a},t)};var nt=function(e){var t=Object(n.useState)({status:"loading"}),a=Object(s.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){(function(e){return fetch(e,{headers:{Accept:"application/json"}})})(e).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return function(e,t){return fetch(e,t).then((function(e){return e.json()}))}(e+"/"+t)}))})).then((function(e){return Promise.all(e)})).then((function(e){return o({status:"loaded",payload:e})})).catch((function(e){return o({status:"error",error:e})}))}),[e]),r},rt=a(279),ot=a.n(rt),it=Object(n.createContext)({user:"",setUser:function(){}}),ct=function(e){var t=e.children,a=e.value;return r.a.createElement(it.Provider,{value:a},t)},lt=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),c=Object(s.a)(i,2),l=c[0],d=c[1],m=Object(n.useState)([]),p=Object(s.a)(m,2),h=p[0],f=p[1],v=Object(n.useState)(""),b=Object(s.a)(v,2),E=b[0],g=b[1],y=Object(n.useRef)(null),_=Object(n.useRef)(null),w=nt(K.a.get("demoPathwaysService"));function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.scrollTo(0,0),d(t),o(e)}Object(n.useEffect)((function(){"loaded"===w.status&&0===h.length&&f(w.payload.map((function(e){return{pathway:e,pathwayResults:null}})))}),[w,h.length]),Object(n.useEffect)((function(){(null===_||void 0===_?void 0:_.current)&&(null===y||void 0===y?void 0:y.current)&&(_.current.style.height=window.innerHeight-y.current.clientHeight+"px")}),[l]);var P=Object(n.useCallback)((function(e){for(var t=Object(u.a)(h),n=0;n<h.length;n++)h[n].pathway.name===e.pathway.name&&(t[n]=e,f(t));(null===a||void 0===a?void 0:a.pathway.name)===e.pathway.name&&o(e)}),[a,h]),k=function(e){var t=e.evaluatedPathway;return r.a.createElement("div",{className:ot.a.display},r.a.createElement(Y,{headerElement:y}),t?r.a.createElement("div",{ref:_,className:ot.a.graph},r.a.createElement(We,{evaluatedPathway:t,expandCurrentNode:!0,updateEvaluatedPathways:P})):r.a.createElement("div",null,"No Pathway Loaded"))};return r.a.createElement(N,null,r.a.createElement(ct,{value:{user:E,setUser:g}},r.a.createElement(at,{pathwayCtx:{updateEvaluatedPathways:P,evaluatedPathway:a,setEvaluatedPathway:O}},r.a.createElement("div",{ref:y},r.a.createElement(j,{logo:T.a}),r.a.createElement(M,{name:"Breast Cancer: Neoadjuvant Chemotherapy with Surgery"})),l?r.a.createElement(et,{evaluatedPathways:h,callback:O,service:w}):r.a.createElement(k,{evaluatedPathway:a}))))},ut=(a(836),document.getElementById("root"));i.a.render(r.a.createElement(c.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(lt,null)}}))),ut)},85:function(e,t,a){e.exports={selectButton:"ActionButton_selectButton___qB5R",accept:"ActionButton_accept__28b2D",decline:"ActionButton_decline__zz-vG",smallActionButton:"ActionButton_smallActionButton__1bPWu",largeActionButton:"ActionButton_largeActionButton__blRdA",largeDecline:"ActionButton_largeDecline__wz9Zw",mediumActionButton:"ActionButton_mediumActionButton__3EpOp"}}},[[441,1,2]]]);
//# sourceMappingURL=main.c815de8b.chunk.js.map